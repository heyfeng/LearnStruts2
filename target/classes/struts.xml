<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
        "http://struts.apache.org/dtds/struts-2.3.dtd">
<struts>
    <!-- 使用jakarta进行解析-->
    <constant name="struts.multipart.parser" value="jakarta"> </constant>
    <!--配置文件发送变化后，立即重新加载 -->
    <constant name="struts.configuration.xml.reload" value="true" />
    <!-- 开发模式下使用,这样可以打印出更详细的错误信息 -->
    <constant name="struts.devMode" value="true" />
    <!--设置编码格式-->
    <constant name="struts.i18n.encoding" value="UTF-8" />
    <package name="default" namespace="/" extends="struts-default">
        <!-- 配置动作 name指定动作的名称，在jsp或html中读访问的地址，class指定动作的实现类-->
        <action name="HelloAction" class="me.caofeng.actions.HelloAction">
            <!-- 实现逻辑视图和物理视图的映射 action要返回一个字符串，name指定接收的字符串名字，
            如果返回的结果和name匹配，则将相应的jsp页面返回个客户端-->
            <result name="success">/hello.jsp</result>
        </action>

        <action name="UploadAction" class="me.caofeng.actions.FileAction" method="upload">
            <interceptor-ref name="fileUpload">
                <!-- 配置允许上传的文件类型 -->
                <param name="allowedTypes">image/bmp,image/gif,image/jpg,image/jpeg</param>

                <!--配置允许上传文件的扩展名,如果有多个用","隔开 -->
                <param name="allowedExtensions">txt,excel,ppt,jpeg</param>

                <!-- 配置允许上传的文件大小,最大为20k -->
                <param name="maximumSize">1024*1024</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack"></interceptor-ref>

            <result name="success">/success.jsp</result>
            <result name="input">/upload.jsp</result>
        </action>

        <action name="DownloadAction" class="me.caofeng.actions.DownloadAction" >
            <result name="success" type="stream">
                <param name="contentType">application/img</param>
                <param name="contentDisposition">
                    attachment;filename="001.jpg"
                </param>
                <param name="inputName">
                    downloadFile
                </param>
            </result>
        </action>
    </package>
</struts>